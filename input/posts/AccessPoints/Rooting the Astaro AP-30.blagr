Title:Rooting the Astaro AP-30
Author:rsaxvc
CreatedDateTime:2011-01-07T00:44:03
ModifiedDateTime:2011-01-07T21:35:06
Tag:Astaro
Tag:Central processing unit
Tag:Linux
Tag:OpenWrt
Tag:Ralink
Tag:Serial port
Tag:TFTP
---
<div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; height: 90%; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font: normal normal normal 13px/normal arial, helvetica, hirakakupro-w3, osaka, 'ms pgothic', sans-serif; font-family: 'Times New Roman'; font-size: medium; ">Previously, I took apart an&nbsp;<a class="zem_slink" href="http://www.astaro.com/" title="Astaro" rel="homepage" style="text-decoration: underline; ">Astaro</a>&nbsp;AP-30, and found the serial output line. Today, I found the input of the serial port, and rooted the device.<div><a href="http://www.flickr.com/photos/40925843@N03/5331804931/" title="Astaro AP-30 Serial Connection by rsaxvc, on Flickr"><img src="http://farm6.static.flickr.com/5047/5331804931_dc0892e15f.jpg" width="500" height="376" alt="Astaro AP-30 Serial Connection" /></a></div><div><br /></div><div>Starting from the square pin on the board,</div><div><ul style="margin-top: 0px; margin-right: 0px; margin-bottom: 0.75em; margin-left: 20px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; font-size: 1em; font-weight: normal; list-style-type: disc; list-style-position: outside; list-style-image: initial; background-repeat: no-repeat repeat; "><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; font-size: 1em; font-weight: normal; ">Pin 1 - Power?</li><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; font-size: 1em; font-weight: normal; ">Pin 2 - Ground</li><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; font-size: 1em; font-weight: normal; ">Pin 3 - Serial from device to console&nbsp;</li><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; font-size: 1em; font-weight: normal; ">Pin 4 - Serial from console to device</li></ul><div>In the picture, I used a 100Ohm resistor, because when you aren't certain it is the console, it pays to be cautious.</div></div><div><br /></div><div><a href="http://rsaxvc.net/blog/2010/12/astaro-ap30-teardown.html" style="text-decoration: underline; "></a>From my&nbsp;<a href="http://rsaxvc.net/blog/2010/12/astaro-ap30-teardown.html" style="text-decoration: underline; ">earlier post</a>,&nbsp;you can see that the device doesn't have an OS installed; it boots from&nbsp;<a class="zem_slink" href="http://en.wikipedia.org/wiki/Trivial_File_Transfer_Protocol" title="Trivial File Transfer Protocol" rel="wikipedia" style="text-decoration: underline; ">TFTP</a>. It appears to do this every time, so potentially, you might be able to upload a new config to one by power-cycling it while running your own TFTP server.</div><div>. Press enter to activate console you say? After guessing the right serial line ( right next to the other), &nbsp;it is my old friend,&nbsp;<a class="zem_slink" href="http://openwrt.org/" title="OpenWrt" rel="homepage" style="text-decoration: underline; ">OpenWRT</a>!&nbsp;<a href="http://rsaxvc.net/Projects/AstaroAP30/astaro_login.txt" style="text-decoration: underline; ">Here is another log</a>. Also, we can see the list of OpenWRT packages&nbsp;<a href="http://rsaxvc.net/Projects/AstaroAP30/astaro_packages.txt" style="text-decoration: underline; ">here</a>. Of note are the RT2860 kernel module and libpcap packages. So the chipset is a&nbsp;<a class="zem_slink" href="http://www.ralinktech.com/" title="Ralink" rel="homepage" style="text-decoration: underline; ">Ralink</a>&nbsp;RT2860 with MIPS24K CPU. This puts it in a class similar to&nbsp;<a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16833162026" style="text-decoration: underline; ">Buffalo WHR-G300N</a>&nbsp;and&nbsp;&nbsp;One common chipset that provides both RT2860 and a MIPS24K is Ralink's own&nbsp;<a href="http://www.ralinktech.com/download.php?t=U0wyRnpjMlYwY3k4eU1EQTVMekE1THpBNEwzQnliMlIxWTNRNE9UTTRNRGt3T0RnMExuQmtaajA5UFZKVU16QTFNQzF3Y205a2RXTjBJR0p5YVdWbUM%3D" style="text-decoration: underline; ">RT3050</a>&nbsp;chipset.</div><div><br /></div><div>Uname:&nbsp;<span class="Apple-style-span" style="color: rgb(0, 0, 0); font-family: monospace; white-space: pre-wrap; "><a class="zem_slink" href="http://www.kernel.org/" title="Linux" rel="homepage" style="text-decoration: underline; ">Linux</a> OpenWrt 2.6.21 #1 Thu Nov 4 14:30:02 CET 2010 mips unknown</span></div></div> 
